# Формат бинарного файла для хранения кривых
## Хранение чисел
Целые числа хранятся в бинарном формате, младший байт идёт первым (little-endian). Размер числа определяется описанием поля.

Дробные числа хранятся как 4 байта.

Файл не предусматривает пустые байты для выравнивания данных.

## Заголовок
Файл начинается с заголовка, в котором указаны версия(для приличия) и количество уравнений. Оба числа - байты без знака.

|Смещение|Имя|Тип|Назначение|
|-|-|-|-|
|0|`sig`|u8 * 4|Заголовок. Первый байт = 0x7F, потом строка `EQU`.|
|4|`ver`|u8|Версия = 0.|
|5|`num_equations`|u8|Количество уравнений в файле.|

## Уравнения
Уравнения идут одно за другим сразу после заголовка. Формат заголовка уравнения определён таблицей ниже.
Дерево, задающее уравнение идёт после заголовка, описано после заголовка.

**ПРИМЕЧАНИЕ**: формат поддерживает только уравнения формата `y = f(x)`.

|Смещение (от начала объекта в файле)|Имя|Тип|Назначение|
|-|-|-|-|
|0|`len`|u16|Длинна уравнения в байтах, без заголовка.|
|2|`red`|u8|Красный компонент цвета уравнения.|
|3|`green`|u8|Зелёный компонент цвета уравнения.|
|4|`blue`|u8|Синий компонент цвета уравнения.|

### Дерево синтаксиса
Уравнение переводится в специальное дерево синтаксиса, которое сохраняется в файле и выполняется при рисовании
графика.

Каждый элемент дерева начинается с числа, которое представляет собой оператор, константу или переменную `x`.
Следующая таблица определяет значения первого байта.

|Байт|Значение|
|-|-|
|0|`x`|
|1|Константа. Следующие 4 байта - дробное число - значение константы|
|2-6|`+ - * / ^` соответственно. Имеет 2 аргумента, каждый из которых - ещё одно дерево, в котором могут использоваться любые операции|
|7-255|Зарезервированно|
